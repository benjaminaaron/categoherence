<!doctype html>
<html>
    <head>
        <title>grouping analysis - create</title>
        <script src='/socket.io/socket.io.js'></script>
        <script src="lib/jquery.js"></script>
        <link rel="stylesheet" type="text/css" href="lib/notie.css">
        <link rel="stylesheet" type="text/css" href="lib/main.css">
        <style></style>
    </head>
    <body>
        <p><strong>create a new session</strong></p>
        session name:
        <input type="text" id="session-id" value="testsession">
        <p>set:</p>
        <textarea id="set-textarea" rows="6" cols="60">
apple, orange, banana, lemon, cherry, strawberry
        </textarea>
        <br><br>
        <input type="checkbox" id="anonymousCheckbox" checked>anonymous
        <br>
        <input type="checkbox" id="allowNewEntitiesCheckbox">allow adding new entities during session
        <br>
        default layout: 
        <select id="defaultLayoutSelector">
            <option value="columns">columns</option>
            <option value="desktop">desktop</option> <!-- TODO find better name -->
        </select>
        <br><br>
        <input id="create-session-btn" type="submit" value="create"> 
        
        <script>
            if(location.search.length > 0) 
                $('#session-id').val(location.search.substring(1));
        
            var socket = io();  
            
            $('#create-session-btn').click(function() {
                var set = [];
                var setArr = $('#set-textarea').val().split(',');
                for(var i = 0; i < setArr.length; i ++)
                    set.push(setArr[i].trim())
                socket.emit('create-session', {
                    'id': $('#session-id').val(),
                    'set': set,
                    'anonymous': document.getElementById('anonymousCheckbox').checked,
                    'allowNewEntities': document.getElementById('allowNewEntitiesCheckbox').checked, 
                    'defaultLayout': $('#defaultLayoutSelector').val()
                });
            });
            
            socket.on('info', function(msg){
                notie.alert(4, msg, 3);
            });     
            socket.on('err', function(msg){
                notie.alert(3, msg, 3);
            });                 
        </script>
        <script src="lib/notie.js"></script>
    </body>
</html>
