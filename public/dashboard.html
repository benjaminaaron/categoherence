<!doctype html>
<html>
    <head>
        <title>categoherence - dashboard</title>
        <script src='/socket.io/socket.io.js'></script>
        <script src="lib/jquery.js"></script>
        <script src="lib/main.js"></script>
        <link rel="stylesheet" type="text/css" href="lib/main.css">
        <style></style>
    </head>
    <body>
        
        <div id="info"><i>no active sessions</i><br><a href="/create">create</a> one</div>
        <ul id="sessions-list"></ul>
        
        <script src="lib/notie.js"></script>
        <script>
            var socket = io();
            
            socket.emit('get-dashboard');
            
            socket.on('dashboard', function(data) {
                document.getElementById('info').innerHTML = '<i>active sessions:</i>';
                var ul = document.getElementById('sessions-list');
                $.each(data, function(i, session) {
                    var li = document.createElement('li');
                    li.appendChild(document.createTextNode(session.info.id + ': ' + session.submissions.length + ' [' + getFormattedTimestamp(session.info.timestamp) + ']'));
                    ul.appendChild(li);
                });
            });
        </script>
    </body>
</html>
